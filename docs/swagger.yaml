components:
  schemas:
    dto.APIKeyListResponse:
      properties:
        api_keys:
          items:
            $ref: '#/components/schemas/dto.APIKeyResponse'
          type: array
          uniqueItems: false
      type: object
    dto.APIKeyResponse:
      properties:
        created_at:
          example: "2024-01-15T10:30:00Z"
          type: string
        expires_at:
          example: "2024-12-31T23:59:59Z"
          type: string
        id:
          example: key_abc123
          type: string
        last_used_at:
          example: "2024-01-20T15:45:00Z"
          type: string
        name:
          example: Production Key
          type: string
        prefix:
          example: sk-voice-abc
          type: string
      type: object
    dto.AgentListResponse:
      properties:
        agents:
          items:
            $ref: '#/components/schemas/dto.AgentResponse'
          type: array
          uniqueItems: false
      type: object
    dto.AgentResponse:
      properties:
        active_installs:
          example: 500
          type: integer
        avg_rating:
          example: 4.5
          type: number
        capabilities:
          example:
          - search
          - weather
          items:
            type: string
          type: array
          uniqueItems: false
        category:
          example: productivity
          type: string
        created_at:
          example: "2024-01-15T10:30:00Z"
          type: string
        description:
          example: A helpful voice assistant
          type: string
        developer_id:
          example: usr_xyz789
          type: string
        id:
          example: agt_abc123
          type: string
        is_public:
          example: true
          type: boolean
        is_verified:
          example: false
          type: boolean
        keywords:
          example:
          - helpful
          - assistant
          items:
            type: string
          type: array
          uniqueItems: false
        logo_url:
          example: https://example.com/logo.png
          type: string
        name:
          example: My Voice Agent
          type: string
        total_installs:
          example: 1000
          type: integer
        total_reviews:
          example: 100
          type: integer
        updated_at:
          example: "2024-01-20T15:45:00Z"
          type: string
      type: object
    dto.CreateAPIKeyRequest:
      properties:
        expires_in_days:
          example: 90
          type: integer
        name:
          example: Production Key
          type: string
      type: object
    dto.CreateAPIKeyResponse:
      properties:
        created_at:
          example: "2024-01-15T10:30:00Z"
          type: string
        expires_at:
          example: "2024-12-31T23:59:59Z"
          type: string
        id:
          example: key_abc123
          type: string
        last_used_at:
          type: string
        name:
          example: Production Key
          type: string
        prefix:
          example: sk-voice-abc
          type: string
        secret:
          example: sk-voice-abcXXXXXXXXXXXXXXXXXXXXX
          type: string
      type: object
    dto.CreateAgentRequest:
      properties:
        capabilities:
          example:
          - search
          - weather
          - calendar
          items:
            type: string
          type: array
          uniqueItems: false
        category:
          enum:
          - productivity
          - education
          - entertainment
          - lifestyle
          - utility
          - social
          - finance
          - health
          - news
          - assistant
          example: productivity
          type: string
        description:
          example: A helpful voice assistant
          type: string
        keywords:
          example:
          - helpful
          - assistant
          - voice
          items:
            type: string
          type: array
          uniqueItems: false
        logo_url:
          example: https://example.com/logo.png
          type: string
        name:
          example: My Voice Agent
          type: string
      type: object
    dto.CreateReviewRequest:
      properties:
        body:
          example: Great agent, very helpful!
          type: string
        rating:
          example: 5
          maximum: 5
          minimum: 1
          type: integer
      type: object
    dto.InstallRequest:
      properties:
        scopes:
          example:
          - profile
          - email
          - realtime
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    dto.InstalledAgentResponse:
      properties:
        agent_id:
          example: agt_abc123
          type: string
        description:
          example: A helpful voice assistant
          type: string
        granted_scopes:
          example:
          - profile
          - email
          items:
            type: string
          type: array
          uniqueItems: false
        installed_at:
          example: "2024-01-15T10:30:00Z"
          type: string
        logo_url:
          example: https://example.com/logo.png
          type: string
        name:
          example: My Voice Agent
          type: string
      type: object
    dto.InstalledAgentsResponse:
      properties:
        agents:
          items:
            $ref: '#/components/schemas/dto.InstalledAgentResponse'
          type: array
          uniqueItems: false
      type: object
    dto.MarketplaceAgentResponse:
      properties:
        avg_rating:
          example: 4.8
          type: number
        category:
          example: productivity
          type: string
        description:
          example: A helpful voice assistant
          type: string
        id:
          example: agt_abc123
          type: string
        is_verified:
          example: true
          type: boolean
        keywords:
          example:
          - helpful
          - assistant
          items:
            type: string
          type: array
          uniqueItems: false
        logo_url:
          example: https://example.com/logo.png
          type: string
        name:
          example: My Voice Agent
          type: string
        total_installs:
          example: 5000
          type: integer
        total_reviews:
          example: 200
          type: integer
      type: object
    dto.MarketplaceListResponse:
      properties:
        agents:
          items:
            $ref: '#/components/schemas/dto.MarketplaceAgentResponse'
          type: array
          uniqueItems: false
        limit:
          example: 20
          type: integer
        offset:
          example: 0
          type: integer
      type: object
    dto.MarketplaceSearchResponse:
      properties:
        agents:
          items:
            $ref: '#/components/schemas/dto.MarketplaceAgentResponse'
          type: array
          uniqueItems: false
      type: object
    dto.MeResponse:
      properties:
        avatar_url:
          example: https://example.com/avatar.png
          type: string
        email:
          example: user@example.com
          type: string
        id:
          example: usr_abc123
          type: string
        is_developer:
          example: false
          type: boolean
        name:
          example: John Doe
          type: string
      type: object
    dto.MetricsListResponse:
      properties:
        agent_id:
          example: agt_abc123
          type: string
        hours:
          example: 24
          type: integer
        metrics:
          items:
            $ref: '#/components/schemas/dto.MetricsResponse'
          type: array
          uniqueItems: false
      type: object
    dto.MetricsResponse:
      properties:
        agent_id:
          example: agt_abc123
          type: string
        avg_latency_ms:
          example: 150
          type: integer
        date:
          example: "2024-01-15"
          type: string
        error_count:
          example: 5
          type: integer
        hour:
          example: 14
          type: integer
        new_installs:
          example: 10
          type: integer
        responses:
          example: 450
          type: integer
        sessions:
          example: 100
          type: integer
        uninstalls:
          example: 2
          type: integer
        unique_users:
          example: 25
          type: integer
        utterances:
          example: 500
          type: integer
      type: object
    dto.ReplyToReviewRequest:
      properties:
        reply:
          example: Thank you for your feedback!
          type: string
      type: object
    dto.ReviewListResponse:
      properties:
        limit:
          example: 20
          type: integer
        offset:
          example: 0
          type: integer
        reviews:
          items:
            $ref: '#/components/schemas/dto.ReviewResponse'
          type: array
          uniqueItems: false
      type: object
    dto.ReviewResponse:
      properties:
        body:
          example: Great agent!
          type: string
        created_at:
          example: "2024-01-15T10:30:00Z"
          type: string
        developer_reply:
          example: Thank you!
          type: string
        id:
          example: rev_abc123
          type: string
        rating:
          example: 5
          type: integer
        replied_at:
          example: "2024-01-16T12:00:00Z"
          type: string
        user_id:
          example: usr_xyz789
          type: string
      type: object
    dto.SummaryResponse:
      properties:
        agent_id:
          example: agt_abc123
          type: string
        avg_latency_ms:
          example: 145
          type: integer
        error_rate:
          example: 1.5
          type: number
        net_installs:
          example: 50
          type: integer
        period:
          example: 7d
          type: string
        total_responses:
          example: 4500
          type: integer
        total_sessions:
          example: 1000
          type: integer
        total_utterances:
          example: 5000
          type: integer
        unique_users:
          example: 200
          type: integer
      type: object
    dto.UpdateAgentRequest:
      properties:
        capabilities:
          example:
          - new
          - capabilities
          items:
            type: string
          type: array
          uniqueItems: false
        category:
          enum:
          - productivity
          - education
          - entertainment
          - lifestyle
          - utility
          - social
          - finance
          - health
          - news
          - assistant
          example: education
          type: string
        description:
          example: Updated description
          type: string
        keywords:
          example:
          - updated
          - keywords
          items:
            type: string
          type: array
          uniqueItems: false
        logo_url:
          example: https://example.com/new-logo.png
          type: string
        name:
          example: Updated Agent Name
          type: string
      type: object
    dto.UpdateScopesRequest:
      properties:
        scopes:
          example:
          - profile
          - email
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    shared.APIError:
      properties:
        code:
          example: invalid_request
          type: string
        details:
          type: object
        message:
          example: Invalid request body
          type: string
      type: object
  securitySchemes:
    APIKeyAuth:
      description: API key for agent connections
      in: header
      name: X-API-Key
      type: apiKey
    BearerAuth:
      description: JWT token from Better Auth
      scheme: bearer
      type: http
externalDocs:
  description: ""
  url: ""
info:
  description: API server for voice agent platform
  title: Voice Backend API
  version: 1.0.0
openapi: 3.1.0
paths:
  /agents:
    get:
      description: Returns all agents owned by the authenticated developer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.AgentListResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: List developer's agents
      tags:
      - agents
    post:
      description: Creates a new agent for the authenticated developer
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.CreateAgentRequest'
                description: Agent details
                summary: request
        description: Agent details
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.AgentResponse'
          description: Created
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Create a new agent
      tags:
      - agents
  /agents/{id}:
    delete:
      description: Deletes an agent owned by the authenticated developer
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete an agent
      tags:
      - agents
    get:
      description: Returns a specific agent owned by the authenticated developer
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.AgentResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get an agent
      tags:
      - agents
    put:
      description: Updates an existing agent owned by the authenticated developer
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.UpdateAgentRequest'
                description: Agent update details
                summary: request
        description: Agent update details
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.AgentResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Update an agent
      tags:
      - agents
  /agents/{id}/publish:
    post:
      description: Makes an agent publicly available in the marketplace
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.AgentResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Publish an agent
      tags:
      - agents
  /agents/{id}/reviews/{review_id}/reply:
    post:
      description: Adds a developer reply to a review on their agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      - description: Review ID
        in: path
        name: review_id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.ReplyToReviewRequest'
                description: Reply content
                summary: request
        description: Reply content
        required: true
      responses:
        "204":
          description: No Content
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Reply to a review
      tags:
      - agents
  /apikeys:
    get:
      description: Returns all API keys owned by the authenticated developer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.APIKeyListResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: List API keys
      tags:
      - apikeys
    post:
      description: Creates a new API key for the authenticated developer
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.CreateAPIKeyRequest'
                description: API key details
                summary: request
        description: API key details
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.CreateAPIKeyResponse'
          description: Created
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Create an API key
      tags:
      - apikeys
  /apikeys/{id}:
    delete:
      description: Deletes an API key owned by the authenticated developer
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete an API key
      tags:
      - apikeys
  /auth/me:
    get:
      description: Returns the currently authenticated user's profile
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.MeResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - auth
  /auth/me/developer:
    post:
      description: Upgrades the current user to developer status
      responses:
        "204":
          description: No Content
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Become a developer
      tags:
      - auth
  /me/agents:
    get:
      description: Returns all agents installed by the authenticated user
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.InstalledAgentsResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: List installed agents
      tags:
      - installs
  /me/agents/{id}:
    delete:
      description: Removes an installed agent from the user's account
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "204":
          description: No Content
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Uninstall an agent
      tags:
      - installs
  /me/agents/{id}/install:
    post:
      description: Installs a public agent for the authenticated user
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.InstallRequest'
                description: Installation options
                summary: request
        description: Installation options
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.InstalledAgentResponse'
          description: Created
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Conflict
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Install an agent
      tags:
      - installs
  /me/agents/{id}/scopes:
    put:
      description: Updates the granted scopes for an installed agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.UpdateScopesRequest'
                description: New scopes
                summary: request
        description: New scopes
        required: true
      responses:
        "204":
          description: No Content
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Update agent scopes
      tags:
      - installs
  /metrics/agents/{id}:
    get:
      description: Returns hourly metrics for an agent owned by the developer
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      - description: Number of hours (default 24, max 168)
        in: query
        name: hours
        schema:
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.MetricsListResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get agent metrics
      tags:
      - metrics
  /metrics/agents/{id}/summary:
    get:
      description: Returns aggregated 7-day metrics summary for an agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.SummaryResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get agent metrics summary
      tags:
      - metrics
  /store/agents:
    get:
      description: Returns paginated list of public agents in the marketplace
      parameters:
      - description: Number of results (default 20, max 100)
        in: query
        name: limit
        schema:
          type: integer
      - description: Offset for pagination
        in: query
        name: offset
        schema:
          type: integer
      - description: Filter by category
        in: query
        name: category
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.MarketplaceListResponse'
          description: OK
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      summary: List public agents
      tags:
      - marketplace
  /store/agents/{id}:
    get:
      description: Returns details of a public agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.MarketplaceAgentResponse'
          description: OK
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      summary: Get a public agent
      tags:
      - marketplace
  /store/agents/{id}/reviews:
    get:
      description: Returns paginated list of reviews for a public agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      - description: Number of results (default 20, max 100)
        in: query
        name: limit
        schema:
          type: integer
      - description: Offset for pagination
        in: query
        name: offset
        schema:
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.ReviewListResponse'
          description: OK
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      summary: Get agent reviews
      tags:
      - marketplace
    post:
      description: Creates a review for an installed agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
              - $ref: '#/components/schemas/dto.CreateReviewRequest'
                description: Review content
                summary: request
        description: Review content
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.ReviewResponse'
          description: Created
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Not Found
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Conflict
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Create a review
      tags:
      - marketplace
  /store/agents/search:
    get:
      description: Searches public agents using semantic search
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        schema:
          type: string
      - description: Number of results (default 10, max 50)
        in: query
        name: limit
        schema:
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dto.MarketplaceSearchResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shared.APIError'
          description: Internal Server Error
      summary: Search agents
      tags:
      - marketplace
servers:
- url: /v1
